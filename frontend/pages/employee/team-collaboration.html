<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Collaboration - IMS Connect</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/1.11.5/css/dataTables.bootstrap5.min.css" rel="stylesheet">
    <link href="../../assets/css/style.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="dashboard.html">IMS Connect</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="dashboard.html">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="my-ideas.html">My Ideas</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="submit-idea.html">Submit Idea</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="team-collaboration.html">Team Collaboration</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="profile.html">Profile</a>
                    </li>
                </ul>
                <div class="d-flex align-items-center">
                    <a href="notifications.html" class="btn btn-light me-2 position-relative">
                        <i class="fas fa-bell"></i>
                        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                            3
                            <span class="visually-hidden">unread notifications</span>
                        </span>
                    </a>
                    <div class="dropdown">
                        <button class="btn btn-light dropdown-toggle" type="button" id="userDropdown" data-bs-toggle="dropdown">
                            <i class="fas fa-user me-2"></i><span id="userName">John Doe</span>
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="profile.html">Profile</a></li>
                            <li><a class="dropdown-item" href="settings.html">Settings</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" id="logoutBtn">Logout</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container mt-4">
        <div class="row mb-4">
            <div class="col">
                <h2>Team Collaboration</h2>
            </div>
            <div class="col-auto">
                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#createTeamModal">
                    <i class="fas fa-plus me-2"></i>Create Team
                </button>
            </div>
        </div>

        <!-- Team Overview -->
        <div class="row mb-4">
            <div class="col-md-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">My Teams</h5>
                        <div class="list-group" id="teamsList">
                            <a href="#" class="list-group-item list-group-item-action active" onclick="showTeamDetails('team1')">
                                <div class="d-flex w-100 justify-content-between">
                                    <h6 class="mb-1">Innovation Task Force</h6>
                                    <small>8 members</small>
                                </div>
                                <small class="text-muted">3 active projects</small>
                            </a>
                            <a href="#" class="list-group-item list-group-item-action" onclick="showTeamDetails('team2')">
                                <div class="d-flex w-100 justify-content-between">
                                    <h6 class="mb-1">Process Improvement</h6>
                                    <small>5 members</small>
                                </div>
                                <small class="text-muted">2 active projects</small>
                            </a>
                            <a href="#" class="list-group-item list-group-item-action" onclick="showTeamDetails('team3')">
                                <div class="d-flex w-100 justify-content-between">
                                    <h6 class="mb-1">Tech Solutions</h6>
                                    <small>6 members</small>
                                </div>
                                <small class="text-muted">1 active project</small>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Team Details -->
            <div class="col-md-8">
                <div class="card">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h5 class="card-title" id="teamName">Innovation Task Force</h5>
                            <div>
                                <button class="btn btn-outline-primary me-2" onclick="editTeam()">
                                    <i class="fas fa-edit me-2"></i>Edit Team
                                </button>
                                <button class="btn btn-outline-danger" onclick="deleteTeam()">
                                    <i class="fas fa-trash me-2"></i>Delete Team
                                </button>
                            </div>
                        </div>

                        <!-- Team Stats -->
                        <div class="row mb-4">
                            <div class="col-md-3">
                                <div class="card bg-light">
                                    <div class="card-body text-center">
                                        <h6 class="card-title">Members</h6>
                                        <h3>8</h3>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card bg-light">
                                    <div class="card-body text-center">
                                        <h6 class="card-title">Ideas</h6>
                                        <h3>12</h3>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card bg-light">
                                    <div class="card-body text-center">
                                        <h6 class="card-title">Projects</h6>
                                        <h3>3</h3>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card bg-light">
                                    <div class="card-body text-center">
                                        <h6 class="card-title">Tasks</h6>
                                        <h3>24</h3>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Team Members -->
                        <div class="mb-4">
                            <h6>Team Members</h6>
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Role</th>
                                            <th>Ideas</th>
                                            <th>Tasks</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>
                                                <img src="../../assets/img/avatar1.jpg" class="rounded-circle me-2" width="30">
                                                John Doe
                                            </td>
                                            <td>Team Lead</td>
                                            <td>5</td>
                                            <td>8</td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-primary me-1">Message</button>
                                                <button class="btn btn-sm btn-outline-danger">Remove</button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <img src="../../assets/img/avatar2.jpg" class="rounded-circle me-2" width="30">
                                                Jane Smith
                                            </td>
                                            <td>Member</td>
                                            <td>3</td>
                                            <td>6</td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-primary me-1">Message</button>
                                                <button class="btn btn-sm btn-outline-danger">Remove</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Active Projects -->
                        <div class="mb-4">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h6>Active Projects</h6>
                                <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#createProjectModal">
                                    <i class="fas fa-plus me-2"></i>New Project
                                </button>
                            </div>
                            <div class="list-group">
                                <a href="#" class="list-group-item list-group-item-action">
                                    <div class="d-flex w-100 justify-content-between">
                                        <h6 class="mb-1">Mobile App Development</h6>
                                        <small class="text-success">On Track</small>
                                    </div>
                                    <div class="progress" style="height: 5px;">
                                        <div class="progress-bar" role="progressbar" style="width: 75%"></div>
                                    </div>
                                    <small class="text-muted">Due: Dec 31, 2024</small>
                                </a>
                                <a href="#" class="list-group-item list-group-item-action">
                                    <div class="d-flex w-100 justify-content-between">
                                        <h6 class="mb-1">Process Automation</h6>
                                        <small class="text-warning">At Risk</small>
                                    </div>
                                    <div class="progress" style="height: 5px;">
                                        <div class="progress-bar bg-warning" role="progressbar" style="width: 45%"></div>
                                    </div>
                                    <small class="text-muted">Due: Jan 15, 2025</small>
                                </a>
                            </div>
                        </div>

                        <!-- Team Chat -->
                        <div>
                            <h6>Team Chat</h6>
                            <div class="card bg-light">
                                <div class="card-body" style="height: 300px; overflow-y: auto;">
                                    <div class="chat-messages" id="teamChat">
                                        <!-- Chat messages will be loaded here -->
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="chatMessage" placeholder="Type your message...">
                                        <button class="btn btn-primary" onclick="sendMessage()">Send</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Team Modal -->
    <div class="modal fade" id="createTeamModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Create New Team</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="createTeamForm">
                        <div class="mb-3">
                            <label class="form-label">Team Name</label>
                            <input type="text" class="form-control" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Description</label>
                            <textarea class="form-control" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Add Members</label>
                            <select class="form-select" multiple>
                                <option value="user1">Jane Smith</option>
                                <option value="user2">Mike Johnson</option>
                                <option value="user3">Sarah Williams</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="createTeam()">Create Team</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Project Modal -->
    <div class="modal fade" id="createProjectModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Create New Project</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="createProjectForm">
                        <div class="mb-3">
                            <label class="form-label">Project Name</label>
                            <input type="text" class="form-control" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Description</label>
                            <textarea class="form-control" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Due Date</label>
                            <input type="date" class="form-control">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Assign Members</label>
                            <select class="form-select" multiple>
                                <option value="user1">John Doe</option>
                                <option value="user2">Jane Smith</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="createProject()">Create Project</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/main.js"></script>
    <script>
        $(document).ready(function() {
            loadTeamChat();
        });

        function showTeamDetails(teamId) {
            // TODO: Load team details from backend
            $('#teamsList a').removeClass('active');
            $(`[onclick="showTeamDetails('${teamId}')"]`).addClass('active');
        }

        function loadTeamChat() {
            // Sample chat messages
            const messages = [
                { user: 'John Doe', message: 'Hey team, how\'s the progress on the mobile app?', time: '10:30 AM' },
                { user: 'Jane Smith', message: 'UI designs are ready for review', time: '10:32 AM' },
                { user: 'Mike Johnson', message: 'Great! I\'ll take a look at them this afternoon', time: '10:35 AM' }
            ];

            const chatHtml = messages.map(msg => `
                <div class="mb-3">
                    <strong>${msg.user}</strong>
                    <small class="text-muted ms-2">${msg.time}</small>
                    <p class="mb-0">${msg.message}</p>
                </div>
            `).join('');

            $('#teamChat').html(chatHtml);
        }

        function sendMessage() {
            const message = $('#chatMessage').val();
            if (message.trim()) {
                // TODO: Send message to backend
                const newMessage = `
                    <div class="mb-3">
                        <strong>You</strong>
                        <small class="text-muted ms-2">Just now</small>
                        <p class="mb-0">${message}</p>
                    </div>
                `;
                $('#teamChat').append(newMessage);
                $('#chatMessage').val('');
            }
        }

        function createTeam() {
            // TODO: Implement team creation
            alert('Team created successfully!');
            $('#createTeamModal').modal('hide');
        }

        function createProject() {
            // TODO: Implement project creation
            alert('Project created successfully!');
            $('#createProjectModal').modal('hide');
        }

        function editTeam() {
            // TODO: Implement team editing
            alert('Team editing not implemented yet');
        }

        function deleteTeam() {
            if (confirm('Are you sure you want to delete this team? This action cannot be undone.')) {
                // TODO: Implement team deletion
                alert('Team deleted successfully!');
            }
        }
    </script>
</body>
</html>
